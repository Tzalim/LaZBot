{

    "id":"swgoh",

    "name":"SWGOH-Discord",

    "version":"2.0",
    
    "type":"command",
    
    "permission":"anyone",
    
    "help":{
    
    	"swgoh":{
    		"id":"swgoh",
	        "title":"SWGOH-Discord Registration",
	        "text":"Register your Discord profile agaist your SWGOH profile for access to game-related commands",
	        "example":"*%PREFIX%%COMMAND% add me <allyCode>\n%PREFIX%%COMMAND% add <mention|discordId> <allyCode>\n\n%PREFIX%%COMMAND% sync me\n%PREFIX%%COMMAND% sync <mention|discordId>*\n\nIn the case that someone else registers on your allycode, the real accound owner can remove the existing registration with their playerId\n(**Use direct message to bot in order to keep your playerId private**)\n*%PREFIX%%COMMAND% remove <allyCode> <playerId>*"
    	},
    	
    	"arena":{
    		"id":"arena",
            "title":"SWGOH Arena Details",
            "text":"Check a player's current arena rank and squads",
            "example":"*%PREFIX%%COMMAND% me*\n*%PREFIX%%COMMAND% <mention|discordId>*"
    	},
    	
    	"mods":{
    	    "id":"mods",
            "title":"SWGOH Mod Management",
            "text":"Receive a formatted player-mods file for use with the Crouching Rancor Mod Management tool\nhttp://apps.crouchingrancor.com/",
            "example":"*%PREFIX%%COMMAND% me*\n*%PREFIX%%COMMAND% <mention|discordId>*"
        },
        
        "zetas":{
            "id":"zetas",
            "title":"SWGOH Zetas Breakdown",
            "text":"Show a player's zeta'd characters and abilities",
            "example":"*%PREFIX%%COMMAND% me*\n*%PREFIX%%COMMAND% <mention|discordId>*"
        },
        
        "heist":{
            "id":"heist",
            "title":"SWGOH Heist Schedule",
            "text":"Check when the next credit and droid heists are scheduled",
            "example":"*%PREFIX%%COMMAND%*"
        }

    },
    
    "queries":{
    	
    	"GET_REGISTER":"SELECT * FROM `swgoh` WHERE `discordID` = ?",
    	"SET_REGISTER":"INSERT INTO `swgoh` (`discordId`, `playerId`, `playerName`, `allyCode`, `playerGuild`) VALUES (?, ?, ?, ?, ?) ON DUPLICATE KEY UPDATE `playerName`=VALUES(`playerName`), `playerGuild`=VALUES(`playerGuild`), `updated`=CURRENT_TIMESTAMP",
    	"DEL_REGISTER":"DELETE FROM `swgoh` WHERE `playerId` = ? AND `allyCode` = ?",
    	
    	"GET_UNITNAMES":"SELECT REPLACE(udn.text,'\"','') as 'name' FROM UnitDef JOIN Localization udn ON udn.id = UnitDef.nameKey AND udn.language = 'ENG_US' WHERE UnitDef.id IN ( ? )",
    	
    	"GET_MODS":"SELECT StatMod.id as 'mod_uid', CASE StatModDefinition.slot WHEN 'STATMOD_SLOT_01' THEN 'square' WHEN 'STATMOD_SLOT_02' THEN 'arrow' WHEN 'STATMOD_SLOT_03' THEN 'diamond' WHEN 'STATMOD_SLOT_04' THEN 'triangle' WHEN 'STATMOD_SLOT_05' THEN 'circle' WHEN 'STATMOD_SLOT_06' THEN 'cross' END as 'slot', LOWER(REPLACE(smsd.text, '\"', '')) as 'set', StatMod.level as 'level', CASE StatModDefinition.rarity WHEN 'ONE_STAR' THEN '1' WHEN 'TWO_STAR' THEN '2' WHEN 'THREE_STAR' THEN '3' WHEN 'FOUR_STAR' THEN '4' WHEN 'FIVE_STAR' THEN '5' WHEN 'SIX_STAR' THEN '6' WHEN 'SEVEN_STAR' THEN '7' END as 'pips', IF(StatModStat.updaterId < 2000, 'Primary', 'Secondary') as 'position', CASE WHEN StatModStat.unitStatId LIKE '%SHIELD%' THEN CASE WHEN StatModStat.unitStatId LIKE '%PERCENT%' THEN 'Protection %' ELSE 'Protection' END WHEN StatModStat.unitStatId LIKE '%OFFENSE%' THEN CASE WHEN StatModStat.unitStatId LIKE '%PERCENT%' THEN 'Offense %' ELSE 'Offense' END WHEN StatModStat.unitStatId LIKE '%DEFENSE%' THEN CASE WHEN StatModStat.unitStatId LIKE '%PERCENT%' THEN 'Defense %' ELSE 'Defense' END WHEN StatModStat.unitStatId LIKE '%HEALTH%' THEN CASE WHEN StatModStat.unitStatId LIKE '%PERCENT%' THEN 'Health %' ELSE 'Health' END WHEN StatModStat.unitStatId LIKE '%CRITICAL%' THEN CASE WHEN StatModStat.unitStatId LIKE '%CHANCE%' THEN 'Critical Chance' WHEN StatModStat.unitStatId LIKE '%DAMAGE%' THEN 'Critical Damage' WHEN StatModStat.unitStatId LIKE '%NEGATE%' THEN 'Critical Avoidance' ELSE StatModStat.unitStatId END WHEN StatModStat.unitStatId LIKE '%RESISTANCE%' THEN 'Tenacity' WHEN StatModStat.unitStatId LIKE '%ACCURACY%' THEN 'Potency' WHEN StatModStat.unitStatId LIKE '%SPEED%' THEN 'Speed' WHEN StatModStat.unitStatId LIKE '%EVASION_NEGATE%' THEN 'Accuracy' ElSE StatModStat.unitStatId END as 'type', IF(StatModStat.unitStatId LIKE '%PERCENT%' OR StatModStat.unitStatId LIKE '%ACCURACY%' OR StatModStat.unitStatId LIKE '%RESISTANCE%' OR StatModStat.unitStatId LIKE '%DAMAGE%', CONCAT('+',ROUND(StatModStat.statValueDecimal/100,2), '%'), CONCAT('+',ROUND(StatModStat.statValueDecimal/10000,0)) ) as 'value', udn.text as 'characterName' FROM StatModStat JOIN StatMod ON StatMod.id = StatModStat.statModId JOIN StatModDefinition ON StatModDefinition.id = StatMod.definitionId JOIN StatModSetDefinition ON StatModSetDefinition.id = StatModDefinition.setId JOIN StatModSetBonus ON StatModSetBonus.statModSetDefinitionId = StatModSetDefinition.id JOIN Unit ON Unit.id = StatMod.unitId JOIN UnitDef ON UnitDef.id = Unit.definitionId JOIN PlayerProfile ON PlayerProfile.playerId = Unit.playerProfilePlayerId JOIN Localization smsd ON smsd.id = StatModSetDefinition.name AND smsd.language = 'ENG_US' JOIN Localization udn ON udn.id = UnitDef.nameKey AND udn.language = 'ENG_US' JOIN Localization udd ON udd.id = UnitDef.descKey AND udd.language = 'ENG_US' WHERE PlayerProfile.allyCode = ? ORDER BY udn.text ASC, StatModDefinition.slot ASC, StatMod.id ASC;",
    	
    	"GET_ZETAS":"SELECT PlayerProfile.name, udn.text as 'unitName', abn.text as 'abilityName' FROM Skill JOIN SkillTierDefinition ON SkillTierDefinition.skillDefinitionId = Skill.id JOIN SkillDefinition ON SkillDefinition.id = SkillTierDefinition.skillDefinitionId JOIN Ability ON Ability.id = SkillDefinition.abilityReference JOIN Unit ON Unit.id = Skill.unitId JOIN PlayerProfile ON PlayerProfile.playerId = Unit.playerProfilePlayerId JOIN UnitDef ON UnitDef.id = Unit.definitionId JOIN Localization sdn ON sdn.id = SkillDefinition.nameKey AND sdn.language = 'ENG_US' JOIN Localization abn ON abn.id = Ability.nameKey AND abn.language = 'ENG_US' JOIN Localization udn ON udn.id = UnitDef.nameKey AND udn.language = 'ENG_US' WHERE SkillTierDefinition.powerOverrideTag = 'zeta' AND PlayerProfile.allyCode = ? AND (Skill.tier+2) = 8 GROUP BY PlayerProfile.name, udn.text, abn.text ORDER BY udn.text ASC, abn.text ASC"
    	
    }
    
}
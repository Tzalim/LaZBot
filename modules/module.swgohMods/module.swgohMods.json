{

    "id":"swgohMods",

    "name":"SWGOH Mods",

    "version":"0.1",
    
    "type":"command",
    
    "permission":"anyone",
    
    "help":{
    
        "title":"SWGOH Mods",
        "text":"Receive a formatted player-mods file for use with the Crouching Rancor Mod Management tool\nhttp://apps.crouchingrancor.com/",
        "example":"*%PREFIX%%COMMAND% me*\n*%PREFIX%%COMMAND% <mention|discordId>*"
        
    },
    
    "queries":{
    	
    	"GET_REGISTRATION":"SELECT `allyCode`, `playerName`, `updated` FROM `swgoh` WHERE `discordID` = ?",
    	"GET_MODS":"SELECT StatMod.id as 'mod_uid', CASE StatModDefinition.slot WHEN 'STATMOD_SLOT_01' THEN 'square' WHEN 'STATMOD_SLOT_02' THEN 'arrow' WHEN 'STATMOD_SLOT_03' THEN 'diamond' WHEN 'STATMOD_SLOT_04' THEN 'triangle' WHEN 'STATMOD_SLOT_05' THEN 'circle' WHEN 'STATMOD_SLOT_06' THEN 'cross' END as 'slot', LOWER(REPLACE(smsd.text, '\"', '')) as 'set', StatMod.level as 'level', CASE StatModDefinition.rarity WHEN 'ONE_STAR' THEN '1' WHEN 'TWO_STAR' THEN '2' WHEN 'THREE_STAR' THEN '3' WHEN 'FOUR_STAR' THEN '4' WHEN 'FIVE_STAR' THEN '5' WHEN 'SIX_STAR' THEN '6' WHEN 'SEVEN_STAR' THEN '7' END as 'pips', IF(StatModStat.updaterId < 2000, 'Primary', 'Secondary') as 'position', CASE WHEN StatModStat.unitStatId LIKE '%SHIELD%' THEN CASE WHEN StatModStat.unitStatId LIKE '%PERCENT%' THEN 'Protection %' ELSE 'Protection' END WHEN StatModStat.unitStatId LIKE '%OFFENSE%' THEN CASE WHEN StatModStat.unitStatId LIKE '%PERCENT%' THEN 'Offense %' ELSE 'Offense' END WHEN StatModStat.unitStatId LIKE '%DEFENSE%' THEN CASE WHEN StatModStat.unitStatId LIKE '%PERCENT%' THEN 'Defense %' ELSE 'Defense' END WHEN StatModStat.unitStatId LIKE '%HEALTH%' THEN CASE WHEN StatModStat.unitStatId LIKE '%PERCENT%' THEN 'Health %' ELSE 'Health' END WHEN StatModStat.unitStatId LIKE '%CRITICAL%' THEN CASE WHEN StatModStat.unitStatId LIKE '%CHANCE%' THEN 'Critical Chance' WHEN StatModStat.unitStatId LIKE '%DAMAGE%' THEN 'Critical Damage' WHEN StatModStat.unitStatId LIKE '%NEGATE%' THEN 'Critical Avoidance' ELSE StatModStat.unitStatId END WHEN StatModStat.unitStatId LIKE '%RESISTANCE%' THEN 'Tenacity' WHEN StatModStat.unitStatId LIKE '%ACCURACY%' THEN 'Potency' WHEN StatModStat.unitStatId LIKE '%SPEED%' THEN 'Speed' WHEN StatModStat.unitStatId LIKE '%EVASION_NEGATE%' THEN 'Accuracy' ElSE StatModStat.unitStatId END as 'type', IF(StatModStat.unitStatId LIKE '%PERCENT%' OR StatModStat.unitStatId LIKE '%ACCURACY%' OR StatModStat.unitStatId LIKE '%RESISTANCE%' OR StatModStat.unitStatId LIKE '%DAMAGE%', CONCAT('+',ROUND(StatModStat.statValueDecimal/100,2), '%'), CONCAT('+',ROUND(StatModStat.statValueDecimal/10000,0)) ) as 'value', udn.text as 'characterName' FROM StatModStat JOIN StatMod ON StatMod.id = StatModStat.statModId JOIN StatModDefinition ON StatModDefinition.id = StatMod.definitionId JOIN StatModSetDefinition ON StatModSetDefinition.id = StatModDefinition.setId JOIN StatModSetBonus ON StatModSetBonus.statModSetDefinitionId = StatModSetDefinition.id JOIN Unit ON Unit.id = StatMod.unitId JOIN UnitDef ON UnitDef.id = Unit.definitionId JOIN PlayerProfile ON PlayerProfile.playerId = Unit.playerProfilePlayerId JOIN Localization smsd ON smsd.id = StatModSetDefinition.name AND smsd.language = 'ENG_US' JOIN Localization udn ON udn.id = UnitDef.nameKey AND udn.language = 'ENG_US' JOIN Localization udd ON udd.id = UnitDef.descKey AND udd.language = 'ENG_US' WHERE PlayerProfile.allyCode = ? ORDER BY udn.text ASC, StatModDefinition.slot ASC, StatMod.id ASC;"
    
    }
        
}